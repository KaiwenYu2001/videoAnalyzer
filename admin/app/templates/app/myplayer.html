<template>
    <div class="app-container">
      <div>原生video</div>
      <video id="videoElement" class="centeredVideo" controls autoplay width="480" height="320" muted>
        Your browser is too old which doesn't support HTML5 video.
      </video>
    </div>
  </template>
   
  <script>
  import flvjs from 'flv.js'
  export default {
   
    data() {
      return {
        
      }
    },
    mounted() {
      this.$nextTick(() => {
        if (flvjs.isSupported()) {
          const videoElement = document.getElementById('videoElement')
          var flvPlayer = flvjs.createPlayer(
            {
              type: 'flv',
              url: 'http://127.0.0.1/live?port=1935&app=myapp&stream=test',
              isLive: true, // <====加个这个
              hasAudio: false,
              hasVideo: true
              // withCredentials: false,
              // cors: true
            },
            {
              enableWorker: true, // 开启多线程
              enableStashBuffer: false,
              lazyLoad: false,
              lazyLoadMaxDuration: 0,
              lazyLoadRecoverDuration: 0,
              deferLoadAfterSourceOpen: false,
              fixAudioTimestampGap: true,
              autoCleanupSourceBuffer: true
            }
          )
          flvPlayer.attachMediaElement(videoElement)
          flvPlayer.load() // 加载
          videoElement.play()
        }
      })
    },
    methods: {
     
    }
  }
  </script>